const employees = [{
  "employee_id": 1,
  "first_name": "Gretta",
  "last_name": "Drohane",
  "department": "Legal",
  "salary": 43947.77,
  "hire_date": "2017-08-24",
  "country": "Indonesia",
  "rank": "Engineer"
}, {
  "employee_id": 2,
  "first_name": "Othelia",
  "last_name": "Schelle",
  "department": "Engineering",
  "salary": 149900.81,
  "hire_date": "2023-07-04",
  "country": "Czech Republic",
  "rank": "Architect"
}, {
  "employee_id": 3,
  "first_name": "Dirk",
  "last_name": "Butterly",
  "department": "Research and Development",
  "salary": 138767.92,
  "hire_date": "2011-08-13",
  "country": "China",
  "rank": "Construction Foreman"
}, {
  "employee_id": 4,
  "first_name": "Cherise",
  "last_name": "Duell",
  "department": "Training",
  "salary": 67364.44,
  "hire_date": "2019-12-24",
  "country": "Peru",
  "rank": "Construction Worker"
}, {
  "employee_id": 5,
  "first_name": "Maybelle",
  "last_name": "Sill",
  "department": "Human Resources",
  "salary": 90657.57,
  "hire_date": "2019-07-08",
  "country": "Ukraine",
  "rank": "Project Manager"
}, {
  "employee_id": 6,
  "first_name": "Wandis",
  "last_name": "Marchment",
  "department": "Engineering",
  "salary": 128081.12,
  "hire_date": "2024-07-04",
  "country": "United Kingdom",
  "rank": "Project Manager"
}, {
  "employee_id": 7,
  "first_name": "Lorinda",
  "last_name": "Juan",
  "department": "Accounting",
  "salary": 125115.42,
  "hire_date": "2018-10-22",
  "country": "Ireland",
  "rank": "Surveyor"
}, {
  "employee_id": 8,
  "first_name": "Lilli",
  "last_name": "Bedinham",
  "department": "Services",
  "salary": 33034.58,
  "hire_date": "2018-03-17",
  "country": "China",
  "rank": "Supervisor"
}, {
  "employee_id": 9,
  "first_name": "Blaire",
  "last_name": "Lefort",
  "department": "Support",
  "salary": 106621.09,
  "hire_date": "2023-05-27",
  "country": "United States",
  "rank": "Surveyor"
}, {
  "employee_id": 10,
  "first_name": "Trula",
  "last_name": "Brosetti",
  "department": "Services",
  "salary": 32817.23,
  "hire_date": "2011-06-05",
  "country": "Costa Rica",
  "rank": "Construction Manager"
}, {
  "employee_id": 11,
  "first_name": "Jillene",
  "last_name": "Bullerwell",
  "department": "Research and Development",
  "salary": 49433.03,
  "hire_date": "2015-01-09",
  "country": "Indonesia",
  "rank": "Construction Foreman"
}, {
  "employee_id": 12,
  "first_name": "Ellissa",
  "last_name": "Ybarra",
  "department": "Research and Development",
  "salary": 72204.24,
  "hire_date": "2011-12-29",
  "country": "United States",
  "rank": "Electrician"
}, {
  "employee_id": 13,
  "first_name": "Ginelle",
  "last_name": "Garter",
  "department": "Training",
  "salary": 119641.27,
  "hire_date": "2016-03-17",
  "country": "United States",
  "rank": "Construction Expeditor"
}, {
  "employee_id": 14,
  "first_name": "Brandise",
  "last_name": "Haywood",
  "department": "Support",
  "salary": 36091.56,
  "hire_date": "2015-01-24",
  "country": "Russia",
  "rank": "Electrician"
}, {
  "employee_id": 15,
  "first_name": "Cyrille",
  "last_name": "Phillot",
  "department": "Accounting",
  "salary": 148779.06,
  "hire_date": "2022-07-08",
  "country": "Serbia",
  "rank": "Construction Foreman"
}, {
  "employee_id": 16,
  "first_name": "Nellie",
  "last_name": "Iley",
  "department": "Business Development",
  "salary": 45872.17,
  "hire_date": "2013-05-03",
  "country": "United Kingdom",
  "rank": "Project Manager"
}, {
  "employee_id": 17,
  "first_name": "Ingeberg",
  "last_name": "Blois",
  "department": "Training",
  "salary": 143907.53,
  "hire_date": "2020-01-03",
  "country": "Morocco",
  "rank": "Electrician"
}, {
  "employee_id": 18,
  "first_name": "Ives",
  "last_name": "Ashwell",
  "department": "Accounting",
  "salary": 57907.56,
  "hire_date": "2014-06-06",
  "country": "Indonesia",
  "rank": "Subcontractor"
}, {
  "employee_id": 19,
  "first_name": "Demetrius",
  "last_name": "Babst",
  "department": "Business Development",
  "salary": 80540.01,
  "hire_date": "2022-03-18",
  "country": "Honduras",
  "rank": "Architect"
}, {
  "employee_id": 20,
  "first_name": "Dix",
  "last_name": "Aggis",
  "department": "Services",
  "salary": 60223.3,
  "hire_date": "2013-05-07",
  "country": "Indonesia",
  "rank": "Project Manager"
}, {
  "employee_id": 21,
  "first_name": "Pansie",
  "last_name": "Bilby",
  "department": "Business Development",
  "salary": 73516.19,
  "hire_date": "2018-04-10",
  "country": "Indonesia",
  "rank": "Electrician"
}, {
  "employee_id": 22,
  "first_name": "Bobbe",
  "last_name": "McPeice",
  "department": "Research and Development",
  "salary": 90584.55,
  "hire_date": "2010-06-19",
  "country": "Cameroon",
  "rank": "Electrician"
}, {
  "employee_id": 23,
  "first_name": "Dunstan",
  "last_name": "Simmins",
  "department": "Product Management",
  "salary": 64441.42,
  "hire_date": "2024-04-16",
  "country": "China",
  "rank": "Electrician"
}, {
  "employee_id": 24,
  "first_name": "Jard",
  "last_name": "Cranage",
  "department": "Legal",
  "salary": 45053.54,
  "hire_date": "2015-12-09",
  "country": "China",
  "rank": "Subcontractor"
}, {
  "employee_id": 25,
  "first_name": "Hymie",
  "last_name": "Faireclough",
  "department": "Sales",
  "salary": 73071.63,
  "hire_date": "2016-10-26",
  "country": "Latvia",
  "rank": "Engineer"
}, {
  "employee_id": 26,
  "first_name": "Mirella",
  "last_name": "MacCoughan",
  "department": "Human Resources",
  "salary": 105900.47,
  "hire_date": "2023-06-19",
  "country": "Montenegro",
  "rank": "Architect"
}, {
  "employee_id": 27,
  "first_name": "Juliann",
  "last_name": "Flicker",
  "department": "Research and Development",
  "salary": 63922.31,
  "hire_date": "2014-07-02",
  "country": "Russia",
  "rank": "Supervisor"
}, {
  "employee_id": 28,
  "first_name": "Demetri",
  "last_name": "Jane",
  "department": "Training",
  "salary": 91053.95,
  "hire_date": "2014-02-04",
  "country": "Botswana",
  "rank": "Supervisor"
}, {
  "employee_id": 29,
  "first_name": "Neal",
  "last_name": "Belfelt",
  "department": "Training",
  "salary": 59281.29,
  "hire_date": "2011-09-24",
  "country": "China",
  "rank": "Electrician"
}, {
  "employee_id": 30,
  "first_name": "Fancy",
  "last_name": "Mochar",
  "department": "Services",
  "salary": 64741.15,
  "hire_date": "2013-06-17",
  "country": "Philippines",
  "rank": "Project Manager"
}, {
  "employee_id": 31,
  "first_name": "Nollie",
  "last_name": "Gilliver",
  "department": "Accounting",
  "salary": 119579.43,
  "hire_date": "2022-11-03",
  "country": "United States",
  "rank": "Construction Worker"
}, {
  "employee_id": 32,
  "first_name": "Gale",
  "last_name": "Doby",
  "department": "Support",
  "salary": 127464.37,
  "hire_date": "2011-06-13",
  "country": "Russia",
  "rank": "Engineer"
}, {
  "employee_id": 33,
  "first_name": "Bernardine",
  "last_name": "Robertet",
  "department": "Services",
  "salary": 142859.14,
  "hire_date": "2011-07-11",
  "country": "Kazakhstan",
  "rank": "Construction Foreman"
}, {
  "employee_id": 34,
  "first_name": "Bernarr",
  "last_name": "Ebbings",
  "department": "Sales",
  "salary": 73397.07,
  "hire_date": "2021-03-14",
  "country": "China",
  "rank": "Subcontractor"
}, {
  "employee_id": 35,
  "first_name": "Marielle",
  "last_name": "Vaen",
  "department": "Product Management",
  "salary": 85617.88,
  "hire_date": "2012-03-01",
  "country": "Russia",
  "rank": "Estimator"
}, {
  "employee_id": 36,
  "first_name": "Tannie",
  "last_name": "Puttock",
  "department": "Legal",
  "salary": 78822.36,
  "hire_date": "2012-09-19",
  "country": "Poland",
  "rank": "Surveyor"
}, {
  "employee_id": 37,
  "first_name": "Gabriela",
  "last_name": "Steketee",
  "department": "Support",
  "salary": 73773.09,
  "hire_date": "2024-01-20",
  "country": "Indonesia",
  "rank": "Engineer"
}, {
  "employee_id": 38,
  "first_name": "Annaliese",
  "last_name": "Bernard",
  "department": "Services",
  "salary": 115445.64,
  "hire_date": "2016-05-13",
  "country": "Nigeria",
  "rank": "Surveyor"
}, {
  "employee_id": 39,
  "first_name": "Felicdad",
  "last_name": "Habershaw",
  "department": "Human Resources",
  "salary": 115999.53,
  "hire_date": "2019-08-27",
  "country": "China",
  "rank": "Architect"
}, {
  "employee_id": 40,
  "first_name": "Theodoric",
  "last_name": "Bertome",
  "department": "Marketing",
  "salary": 75198.76,
  "hire_date": "2012-12-09",
  "country": "Indonesia",
  "rank": "Engineer"
}]


//total salary of emp hired before 2015
const before2015 = employees.filter((employee) => employee.hire_date < "2015-01-01").
                  reduce((acc,curVal) => acc+parseFloat(curVal.salary),0)
// console.log(before2015);

//what is the average salary of employees in the Engineering  dept with rank of Engr
const engrDept = employees.filter((employee) => employee.department == "Services").
filter((employee) => employee.rank == "Project Manager")
// .reduce((acc,curVal) => acc+parseFloat(curVal.salary)/2,0)
// console.log(engrDept);

const totalSal = engrDept.reduce((acc,curVal)=>acc + parseFloat(curVal.salary),0)

const averageSal = totalSal/(engrDept.length)
// console.log(averageSal);

//what is the country with the highest salary
// const countrySal = employees.reduce((acc,employee)=>{
//   const country = employee.country
//   const salary = employee.salary
//   if(!acc[country]) acc[country] = {total:0,count:0}
//   acc[country].total += salary
//   acc[country].count++
//   return acc
// },{})
// console.log(countrySal);

// const highestSal = employees.reduce((max,curVal) => {
//   if(curVal.salary > max){
//     max = curVal.salary
//   }
//   return max
// },0)

// console.log(highestSal);

 //list the top 3 highest paid along with their names and salaries
 const salary = employees.sort((a,b)=> b.salary - a.salary).slice(0,3)
 .map((employee => ({name:employee.f, salary:employee.salary,country:employee.country})))
 console.log(salary);

 //Generate a report that shows the total number of employees,salary,average salary and number of employees per dept
const totalNoOfEmp = employees.length
const totalSalary = employees.reduce((acc,eachSalary)=>acc+eachSalary.salary,0)
const employeePerDept = employees.reduce((acc,employee)=>{
  const dept = employee.department
 acc[dept] = (acc[dept] || 0) + 1
 return acc
}, {})
const averageEmpSal = totalSalary/totalNoOfEmp

const report = employees.map((employee) => ({
  "Total number of employees":totalNoOfEmp,
  "total Salary":totalSalary,
  "Average Sal":averageEmpSal,
  "employeePerDept":employeePerDept
}))
console.log(report);